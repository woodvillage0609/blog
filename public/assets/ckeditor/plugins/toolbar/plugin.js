!function(){function o(o){function t(){for(var t=s(),n=CKEDITOR.tools.clone(o.config.toolbarGroups)||e(o),r=0;r<n.length;r++){var l=n[r];if("/"!=l){"string"==typeof l&&(l=n[r]={name:l});var i,u=l.groups;if(u)for(var c,p=0;p<u.length;p++)c=u[p],i=t[c],i&&a(l,i);i=t[l.name],i&&a(l,i)}}return n}function s(){var e,t,s,a,n,r={};for(e in o.ui.items)t=o.ui.items[e],s=t.toolbar||"others",s&&(s=s.split(","),a=s[0],n=parseInt(s[1]||-1,10),r[a]||(r[a]=[]),r[a].push({name:e,order:n}));for(a in r)r[a]=r[a].sort(function(o,e){return o.order==e.order?0:e.order<0?-1:o.order<0?1:o.order<e.order?-1:1});return r}function a(e,t){if(t.length){e.items?e.items.push(o.ui.create("-")):e.items=[];for(var s,a;s=t.shift();)if(a="string"==typeof s?s:s.name,!r||-1==CKEDITOR.tools.indexOf(r,a)){if(s=o.ui.create(a),!s)continue;if(!o.addFeature(s))continue;e.items.push(s)}}}function n(o){var e,t,s,n=[];for(e=0;e<o.length;++e)t=o[e],s={},"/"==t?n.push(t):CKEDITOR.tools.isArray(t)?(a(s,CKEDITOR.tools.clone(t)),n.push(s)):t.items&&(a(s,CKEDITOR.tools.clone(t.items)),s.name=t.name,n.push(s));return n}var r=o.config.removeButtons;r=r&&r.split(",");var l=o.config.toolbar;return"string"==typeof l&&(l=o.config["toolbar_"+l]),o.toolbar=l?n(l):t()}function e(o){return o._.toolbarGroups||(o._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var t=function(){this.toolbars=[],this.focusCommandExecuted=!1};t.prototype.focus=function(){for(var o,e=0;o=this.toolbars[e++];)for(var t,s=0;t=o.items[s++];)if(t.focus)return void t.focus()};var s={toolbarFocus:{modes:{wysiwyg:1,source:1},readOnly:1,exec:function(o){o.toolbox&&(o.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){o.toolbox.focus()},100):o.toolbox.focus())}}};CKEDITOR.plugins.add("toolbar",{requires:"button",lang:"af,ar,az,bg,bn,bs,ca,cs,cy,da,de,de-ch,el,en,en-au,en-ca,en-gb,eo,es,es-mx,et,eu,fa,fi,fo,fr,fr-ca,gl,gu,he,hi,hr,hu,id,is,it,ja,ka,km,ko,ku,lt,lv,mk,mn,ms,nb,nl,no,oc,pl,pt,pt-br,ro,ru,si,sk,sl,sq,sr,sr-latn,sv,th,tr,tt,ug,uk,vi,zh,zh-cn",init:function(e){var a,n=function(o,t){var s,r,l="rtl"==e.lang.dir,i=e.config.toolbarGroupCycling,u=l?37:39,c=l?39:37;switch(i=void 0===i||i,t){case 9:case CKEDITOR.SHIFT+9:for(;!r||!r.items.length;)if(r=9==t?(r?r.next:o.toolbar.next)||e.toolbox.toolbars[0]:(r?r.previous:o.toolbar.previous)||e.toolbox.toolbars[e.toolbox.toolbars.length-1],r.items.length)for(o=r.items[a?r.items.length-1:0];o&&!o.focus;)o=a?o.previous:o.next,o||(r=0);return o&&o.focus(),!1;case u:s=o;do s=s.next,!s&&i&&(s=o.toolbar.items[0]);while(s&&!s.focus);return s?s.focus():n(o,9),!1;case 40:return o.button&&o.button.hasArrow?o.execute():n(o,40==t?u:c),!1;case c:case 38:s=o;do s=s.previous,!s&&i&&(s=o.toolbar.items[o.toolbar.items.length-1]);while(s&&!s.focus);return s?s.focus():(a=1,n(o,CKEDITOR.SHIFT+9),a=0),!1;case 27:return e.focus(),!1;case 13:case 32:return o.execute(),!1}return!0};e.on("uiSpace",function(s){function a(o){var t=o.render(e,u);O=v.items.push(t)-1,O>0&&(t.previous=v.items[O-1],t.previous.next=t),t.toolbar=v,t.onkey=n,t.onfocus=function(){e.toolbox.focusCommandExecuted||e.focus()}}if(s.data.space==e.config.toolbarLocation){s.removeListener(),e.toolbox=new t;var r,l,i=CKEDITOR.tools.getNextId(),u=['<span id="',i,'" class="cke_voice_label">',e.lang.toolbar.toolbars,"</span>",'<span id="'+e.ui.spaceId("toolbox")+'" class="cke_toolbox" role="group" aria-labelledby="',i,'" onmousedown="return false;">'],c=e.config.toolbarStartupExpanded!==!1;e.config.toolbarCanCollapse&&e.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&u.push('<span class="cke_toolbox_main"'+(c?">":' style="display:none">'));for(var p=e.toolbox.toolbars,f=o(e),b=f.length,d=0;b>d;d++){var m,h,g,v=0,C=f[d],E="/"!==C&&("/"===f[d+1]||d==b-1);if(C)if(r&&(u.push("</span>"),r=0,l=0),"/"!==C){g=C.items||C;for(var I=0;I<g.length;I++){var x,T=g[I];if(T){if(T.type==CKEDITOR.UI_SEPARATOR){l=r&&T;continue}if(x=T.canGroup!==!1,!v){m=CKEDITOR.tools.getNextId(),v={id:m,items:[]},h=C.name&&(e.lang.toolbar.toolbarGroups[C.name]||C.name),u.push('<span id="',m,'" class="cke_toolbar'+(E?' cke_toolbar_last"':'"'),h?' aria-labelledby="'+m+'_label"':"",' role="toolbar">'),h&&u.push('<span id="',m,'_label" class="cke_voice_label">',h,"</span>"),u.push('<span class="cke_toolbar_start"></span>');var O=p.push(v)-1;O>0&&(v.previous=p[O-1],v.previous.next=v)}x?r||(u.push('<span class="cke_toolgroup" role="presentation">'),r=1):r&&(u.push("</span>"),r=0),l&&(a(l),l=0),a(T)}}r&&(u.push("</span>"),r=0,l=0),v&&u.push('<span class="cke_toolbar_end"></span></span>')}else u.push('<span class="cke_toolbar_break"></span>')}if(e.config.toolbarCanCollapse&&u.push("</span>"),e.config.toolbarCanCollapse&&e.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var _=CKEDITOR.tools.addFunction(function(){e.execCommand("toolbarCollapse")});e.on("destroy",function(){CKEDITOR.tools.removeFunction(_)}),e.addCommand("toolbarCollapse",{readOnly:1,exec:function(o){var e=o.ui.space("toolbar_collapser"),t=e.getPrevious(),s=o.ui.space("contents"),a=t.getParent(),n=parseInt(s.$.style.height,10),r=a.$.offsetHeight,l="cke_toolbox_collapser_min",i=e.hasClass(l);i?(t.show(),e.removeClass(l),e.setAttribute("title",o.lang.toolbar.toolbarCollapse)):(t.hide(),e.addClass(l),e.setAttribute("title",o.lang.toolbar.toolbarExpand)),e.getFirst().setText(i?"\u25b2":"\u25c0");var u=a.$.offsetHeight-r;s.setStyle("height",n-u+"px"),o.fire("resize",{outerHeight:o.container.$.offsetHeight,contentsHeight:s.$.offsetHeight,outerWidth:o.container.$.offsetWidth})},modes:{wysiwyg:1,source:1}}),e.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse"),u.push('<a title="'+(c?e.lang.toolbar.toolbarCollapse:e.lang.toolbar.toolbarExpand)+'" id="'+e.ui.spaceId("toolbar_collapser")+'" tabIndex="-1" class="cke_toolbox_collapser'),c||u.push(" cke_toolbox_collapser_min"),u.push('" onclick="CKEDITOR.tools.callFunction('+_+')">','<span class="cke_arrow">&#9650;</span>',"</a>")}u.push("</span>"),s.data.html+=u.join("")}}),e.on("destroy",function(){if(this.toolbox){var o,e,t,s,a=0;for(o=this.toolbox.toolbars;a<o.length;a++)for(t=o[a].items,e=0;e<t.length;e++)s=t[e],s.clickFn&&CKEDITOR.tools.removeFunction(s.clickFn),s.keyDownFn&&CKEDITOR.tools.removeFunction(s.keyDownFn)}}),e.on("uiReady",function(){var o=e.ui.space("toolbox");o&&e.focusManager.add(o,1)}),e.addCommand("toolbarFocus",s.toolbarFocus),e.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus"),e.ui.add("-",CKEDITOR.UI_SEPARATOR,{}),e.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(o,e){return e.push('<span class="cke_toolbar_separator" role="separator"></span>'),{}}}}})}}),CKEDITOR.ui.prototype.addToolbarGroup=function(o,t,s){var a=e(this.editor),n=0===t,r={name:o};if(s){if(s=CKEDITOR.tools.search(a,function(o){return o.name==s}))return!s.groups&&(s.groups=[]),t&&(t=CKEDITOR.tools.indexOf(s.groups,t),t>=0)?void s.groups.splice(t+1,0,o):void(n?s.groups.splice(0,0,o):s.groups.push(o));t=null}t&&(t=CKEDITOR.tools.indexOf(a,function(o){return o.name==t})),n?a.splice(0,0,o):"number"==typeof t?a.splice(t+1,0,r):a.push(o)}}(),CKEDITOR.UI_SEPARATOR="separator",CKEDITOR.config.toolbarLocation="top";